<!DOCTYPE html>
<html>
  <body style="background: #333">
    <style>
      w-worklet * {
        align-items: center;
        justify-content: space-around;
        height: 100%;
      }
      w-knob::part(knob-svg-path) {
        fill: #000;
        stroke: #556;
        stroke-width: 2px;
      }
      w-knob::part(knob-circle) {
        background: #666;
        border-top: 1.5px solid #fff;
        border-left: 1.5px solid #fff;
        box-shadow: inset -1px -1px 3px -1px #333;
        width: 27px;
        height: 27px;
        border-radius: 100%;
        z-index: 1;
      }
      w-param {
        position: relative;
        display: inline-flex;
        flex-flow: column nowrap;
        align-items: center;
        justify-content: center;
      }
      w-param::part(param-number) {
        background: #000;
        color: #fff;
        width: 6ch;
        font-family: monospace;
        text-align: center;
      }
      w-param::part(param-range) {
        display: none;
      }
      w-piano::part(piano-white) {
        background: #111;
      }
      w-piano::part(piano-black) {
        background: #666;
        border-top: 1.5px solid #fff;
        border-left: 1.5px solid #fff;
      }
      w-piano {
        --pressed-white: #666;
        --pressed-black: #111;
      }
    </style>

    <w-context id="wa">
      <w-worklet name="noise" src="./noise.js">
        <w-piano></w-piano>

        <div style="display: flex; margin: 20px">
          <w-param name="volume" precision="3">
            <w-knob shape="octagon" size="90"></w-knob>
            <w-knob shape="hexagon" size="150"></w-knob>
          </w-param>

          <w-param name="volume" precision="3">
            <w-fader size="161"></w-fader>
            <w-knob shape="hexagon" size="75"></w-knob>
          </w-param>

          <w-param name="volume" precision="3">
            <w-knob shape="decagon" size="90"></w-knob>
            <w-knob shape="dodecagon" size="150"></w-knob>
          </w-param>
        </div>

        <w-destination></w-destination>
      </w-worklet>
    </w-context>

    <script type="module">
      const define = (ns, elements) =>
        Promise.all(
          elements.map(async ([name, src]) => [name, await import(src)])
        ).then((modules) =>
          modules.map(([name, mod]) =>
            customElements.define(ns + '-' + name, mod.default)
          )
        )

      await define('w', [
        ['context', './components/context.js'],
        ['worklet', './components/worklet.js'],
        ['destination', './components/destination.js'],
        ['param', './components/param.js'],
        ['knob', './components/knob.js'],
        ['fader', './components/fader.js'],
        ['piano', './components/piano.js'],
      ])
    </script>
  </body>
</html>
